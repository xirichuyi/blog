import{h as R,r as s,b as l,j as e}from"./index-Cfx8vNNh.js";import{A as B}from"./AdminLayout-DBr5zY72.js";const K=()=>{const{showNotification:a}=R(),[w,S]=s.useState([]),[k,j]=s.useState(!1),[C,m]=s.useState(!1),[d,u]=s.useState(null),[i,o]=s.useState({name:"",description:"",icon:"folder"}),[D,A]=s.useState([]),[E,v]=s.useState(!1),[N,h]=s.useState(!1),[g,p]=s.useState(null),[n,c]=s.useState({name:""}),[y,T]=s.useState("categories");s.useEffect(()=>{x(),f()},[]);const x=async()=>{j(!0);try{const t=await l.getPublicCategories();t.success&&t.data&&S(t.data)}catch(t){console.error("Failed to load categories:",t),a({type:"error",title:"Failed to load categories"})}finally{j(!1)}},L=async()=>{if(!i.name.trim()){a({type:"error",title:"Category name is required"});return}try{const t=await l.createCategory(i);t.success?(a({type:"success",title:"Category created successfully"}),m(!1),o({name:"",description:"",icon:"folder"}),x()):a({type:"error",title:t.message||"Failed to create category"})}catch(t){console.error("Failed to create category:",t),a({type:"error",title:"Failed to create category"})}},q=async()=>{if(!d||!i.name.trim()){a({type:"error",title:"Category name is required"});return}try{const t=await l.updateCategory(d.id,i);t.success?(a({type:"success",title:"Category updated successfully"}),m(!1),u(null),o({name:"",description:"",icon:"folder"}),x()):a({type:"error",title:t.message||"Failed to update category"})}catch(t){console.error("Failed to update category:",t),a({type:"error",title:"Failed to update category"})}},I=async t=>{if(confirm("Are you sure you want to delete this category?"))try{const r=await l.deleteCategory(t);r.success?(a({type:"success",title:"Category deleted successfully"}),x()):a({type:"error",title:r.message||"Failed to delete category"})}catch(r){console.error("Failed to delete category:",r),a({type:"error",title:"Failed to delete category"})}},f=async()=>{v(!0);try{const t=await l.getPublicTags();t.success&&t.data&&A(t.data)}catch(t){console.error("Failed to load tags:",t),a({type:"error",title:"Failed to load tags"})}finally{v(!1)}},M=async()=>{if(!n.name.trim()){a({type:"error",title:"Tag name is required"});return}try{const t=await l.createTag(n);t.success?(a({type:"success",title:"Tag created successfully"}),h(!1),c({name:""}),f()):a({type:"error",title:t.message||"Failed to create tag"})}catch(t){console.error("Failed to create tag:",t),a({type:"error",title:"Failed to create tag"})}},U=async()=>{if(!g||!n.name.trim()){a({type:"error",title:"Tag name is required"});return}try{const t=await l.updateTag(g.id,n);t.success?(a({type:"success",title:"Tag updated successfully"}),h(!1),p(null),c({name:""}),f()):a({type:"error",title:t.message||"Failed to update tag"})}catch(t){console.error("Failed to update tag:",t),a({type:"error",title:"Failed to update tag"})}},z=async t=>{if(confirm("Are you sure you want to delete this tag?"))try{const r=await l.deleteTag(t);r.success?(a({type:"success",title:"Tag deleted successfully"}),f()):a({type:"error",title:r.message||"Failed to delete tag"})}catch(r){console.error("Failed to delete tag:",r),a({type:"error",title:"Failed to delete tag"})}},b=t=>{t?(u(t),o({name:t.name,description:t.description||"",icon:t.icon||"folder"})):(u(null),o({name:"",description:"",icon:"folder"})),m(!0)},F=t=>{t?(p(t),c({name:t.name})):(p(null),c({name:""})),h(!0)},H=()=>{m(!1),u(null),o({name:"",description:"",icon:"folder"})},P=()=>{h(!1),p(null),c({name:""})};return e.jsx(B,{title:"Categories & Tags Management",children:e.jsxs("div",{className:"categories-tags-management",children:[e.jsxs("div",{className:"management-header",children:[e.jsx("h1",{className:"page-title md-typescale-headline-large",children:"Categories & Tags Management"}),e.jsx("p",{className:"page-description md-typescale-body-large",children:"Manage your blog categories and tags. Create, edit, and organize your content taxonomy."})]}),e.jsx("div",{className:"tab-navigation",children:e.jsxs("md-tabs",{children:[e.jsx("md-primary-tab",{active:y==="categories",onClick:()=>T("categories"),children:e.jsx("md-icon",{slot:"icon",style:{fontSize:"40px",width:"40px",height:"40px",lineHeight:"40px"},children:"folder"})}),e.jsx("md-primary-tab",{active:y==="tags",onClick:()=>T("tags"),children:e.jsx("md-icon",{slot:"icon",style:{fontSize:"40px",width:"40px",height:"40px",lineHeight:"40px"},children:"label"})})]})}),y==="categories"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{className:"section-title md-typescale-headline-medium",children:"Categories"}),e.jsxs("md-filled-button",{onClick:()=>b(),children:[e.jsx("md-icon",{slot:"icon",children:"add"}),"Add Category"]})]}),k?e.jsxs("div",{className:"loading-container",children:[e.jsx("md-circular-progress",{indeterminate:!0}),e.jsx("span",{className:"loading-text",children:"Loading categories..."})]}):e.jsx("div",{className:"categories-grid",children:w.map(t=>e.jsx("md-elevated-card",{className:"category-item",children:e.jsxs("div",{className:"category-content",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("md-icon",{className:"category-icon",children:t.icon||"folder"}),e.jsxs("div",{className:"category-info",children:[e.jsx("h3",{className:"category-name md-typescale-title-medium",children:t.name}),e.jsx("p",{className:"category-description md-typescale-body-medium",children:t.description||"No description"})]})]}),e.jsxs("div",{className:"category-actions",children:[e.jsx("md-icon-button",{onClick:()=>b(t),children:e.jsx("md-icon",{children:"edit"})}),e.jsx("md-icon-button",{onClick:()=>I(t.id),children:e.jsx("md-icon",{children:"delete"})})]})]})},t.id))})]}),y==="tags"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h2",{className:"section-title md-typescale-headline-medium",children:"Tags"}),e.jsxs("md-filled-button",{onClick:()=>F(),children:[e.jsx("md-icon",{slot:"icon",children:"add"}),"Add Tag"]})]}),E?e.jsxs("div",{className:"loading-container",children:[e.jsx("md-circular-progress",{indeterminate:!0}),e.jsx("span",{className:"loading-text",children:"Loading tags..."})]}):e.jsx("div",{className:"tags-grid",children:D.map(t=>e.jsx("md-elevated-card",{className:"tag-item",children:e.jsxs("div",{className:"tag-content",children:[e.jsxs("div",{className:"tag-header",children:[e.jsx("md-icon",{className:"tag-icon",children:"label"}),e.jsx("div",{className:"tag-info",children:e.jsx("h3",{className:"tag-name md-typescale-title-medium",children:t.name})})]}),e.jsxs("div",{className:"tag-actions",children:[e.jsx("md-icon-button",{onClick:()=>F(t),children:e.jsx("md-icon",{children:"edit"})}),e.jsx("md-icon-button",{onClick:()=>z(t.id),children:e.jsx("md-icon",{children:"delete"})})]})]})},t.id))})]}),C&&e.jsxs("md-dialog",{open:C,children:[e.jsx("div",{slot:"headline",children:d?"Edit Category":"Create Category"}),e.jsxs("form",{slot:"content",className:"dialog-form",children:[e.jsx("md-outlined-text-field",{label:"Category Name",value:i.name,onInput:t=>o({...i,name:t.target.value}),required:!0}),e.jsx("md-outlined-text-field",{label:"Description",value:i.description,onInput:t=>o({...i,description:t.target.value}),type:"textarea",rows:3}),e.jsx("md-outlined-text-field",{label:"Icon",value:i.icon,onInput:t=>o({...i,icon:t.target.value}),"supporting-text":"Material Design icon name (e.g., folder, category, label)"})]}),e.jsxs("div",{slot:"actions",children:[e.jsx("md-text-button",{onClick:H,children:"Cancel"}),e.jsx("md-filled-button",{onClick:d?q:L,children:d?"Update":"Create"})]})]}),N&&e.jsxs("md-dialog",{open:N,children:[e.jsx("div",{slot:"headline",children:g?"Edit Tag":"Create Tag"}),e.jsx("form",{slot:"content",className:"dialog-form",children:e.jsx("md-outlined-text-field",{label:"Tag Name",value:n.name,onInput:t=>c({...n,name:t.target.value}),required:!0})}),e.jsxs("div",{slot:"actions",children:[e.jsx("md-text-button",{onClick:P,children:"Cancel"}),e.jsx("md-filled-button",{onClick:g?U:M,children:g?"Update":"Create"})]})]})]})})};export{K as default};

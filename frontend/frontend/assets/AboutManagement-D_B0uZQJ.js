import{h as A,r as a,b as l,j as e}from"./index-Cfx8vNNh.js";import{A as j}from"./AdminLayout-DBr5zY72.js";/* empty css                   */const C=()=>{const{showNotification:i}=A(),[m,r]=a.useState(""),[p,n]=a.useState(""),[f,d]=a.useState(""),[o,c]=a.useState(""),[v,h]=a.useState(!0),[y,x]=a.useState(!1),u=a.useRef(null);a.useEffect(()=>{(async()=>{h(!0);const t=await l.getAbout();t.success&&t.data&&(r(t.data.title),n(t.data.subtitle),d(t.data.content),c(t.data.photo_url?l.getImageUrl(t.data.photo_url):"")),h(!1)})()},[]);const b=async t=>{x(!0);try{const s=await l.uploadPostImage(t);if(s.success&&s.data?.file_url){const I=l.getImageUrl(s.data.file_url);c(I),i({type:"success",title:"Image Uploaded"})}else i({type:"error",title:"Upload Failed",message:s.error})}catch(s){i({type:"error",title:"Upload Failed",message:s.message})}finally{x(!1)}},g=async()=>{const t=await l.getAbout();t.success&&t.data&&(r(t.data.title),n(t.data.subtitle),d(t.data.content),c(t.data.photo_url?l.getImageUrl(t.data.photo_url):""))},N=async()=>{const t={title:m,subtitle:p,content:f};o&&(t.photo_url=(o.startsWith("http"),o));const s=await l.updateAbout(t);s.success?(i({type:"success",title:"About Saved"}),await g()):i({type:"error",title:s.error||"Save Failed"})};return v?e.jsx(j,{title:"About Management",children:e.jsx("div",{className:"post-editor-loading",children:e.jsx("md-circular-progress",{indeterminate:!0})})}):e.jsx(j,{title:"About Management",children:e.jsxs("div",{className:"post-editor-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"md-typescale-headline-small",children:"Basic Info"}),e.jsx("md-outlined-text-field",{label:"Title",value:m,onInput:t=>r(t.target.value),class:"title-field"}),e.jsx("md-outlined-text-field",{label:"Subtitle",value:p,onInput:t=>n(t.target.value),class:"title-field"}),e.jsxs("div",{className:"cover-upload-section",children:[e.jsx("label",{className:"md-typescale-body-large",children:"Profile Image"}),e.jsxs("div",{className:"cover-upload-container",children:[o?e.jsxs("div",{className:"cover-preview",children:[e.jsx("img",{src:o,alt:"About",className:"cover-image"}),e.jsxs("div",{className:"cover-overlay",style:{pointerEvents:"auto"},children:[e.jsx("md-icon-button",{onClick:()=>u.current?.click(),children:e.jsx("md-icon",{children:"edit"})}),e.jsx("md-icon-button",{onClick:async()=>{c("");const t=await l.updateAbout({photo_url:""});t.success?i({type:"success",title:"Image Removed"}):i({type:"error",title:t.error||"Remove Failed"}),await g()},children:e.jsx("md-icon",{children:"delete"})})]})]}):e.jsx("div",{className:"cover-upload-area",onClick:()=>u.current?.click(),children:y?e.jsx("div",{className:"upload-progress",children:e.jsx("md-circular-progress",{indeterminate:!0})}):e.jsxs(e.Fragment,{children:[e.jsx("md-icon",{class:"upload-icon",children:"cloud_upload"}),e.jsx("p",{className:"md-typescale-body-large",children:"Upload Image"}),e.jsx("p",{className:"md-typescale-body-small",children:"Supported: JPG, PNG, WebP, GIF (Max 10MB)"})]})}),e.jsx("input",{ref:u,type:"file",accept:"image/*",style:{display:"none"},onChange:t=>{const s=t.target.files?.[0];s&&b(s),t.currentTarget.value=""}})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h2",{className:"md-typescale-headline-small",children:"Content"}),e.jsx("md-outlined-text-field",{label:"About Content",type:"textarea",rows:12,value:f,onInput:t=>d(t.target.value),class:"content-field"})]}),e.jsx("div",{className:"form-section",style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("md-filled-button",{onClick:N,children:[e.jsx("md-icon",{slot:"icon",children:"save"}),"Save"]})})]})})};export{C as default};

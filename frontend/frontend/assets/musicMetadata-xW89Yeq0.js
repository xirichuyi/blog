async function d(t){return new Promise((a,i)=>{const o=new Audio,e=URL.createObjectURL(t);o.addEventListener("loadedmetadata",()=>{const r={duration:o.duration};r.title||(r.title=t.name.replace(/\.[^/.]+$/,"")),URL.revokeObjectURL(e),a(r)}),o.addEventListener("error",()=>{URL.revokeObjectURL(e),i(new Error("Failed to load audio metadata"))}),o.src=e})}function c(t){if(!t||isNaN(t))return"0:00";const a=Math.floor(t/60),i=Math.floor(t%60);return`${a}:${i.toString().padStart(2,"0")}`}function l(t){if(t===0)return"0 Bytes";const a=1024,i=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,o)).toFixed(2))+" "+i[o]}function s(t){return["audio/mpeg","audio/mp3","audio/wav","audio/ogg","audio/mp4","audio/aac","audio/flac","audio/webm"].includes(t.type)}function m(t){return{"audio/mpeg":"MP3","audio/mp3":"MP3","audio/wav":"WAV","audio/ogg":"OGG","audio/mp4":"MP4","audio/aac":"AAC","audio/flac":"FLAC","audio/webm":"WebM"}[t.type]||"Unknown"}async function p(t){try{return null}catch(a){return console.warn("Failed to extract cover art:",a),null}}async function f(t){const a=s(t),i=m(t),o=l(t.size);let e={},r="0:00",n=null;if(a)try{e=await d(t),e.duration&&(r=c(e.duration)),n=await p(t)}catch(u){console.warn("Failed to analyze audio file:",u)}return{metadata:e,isValid:a,fileType:i,formattedSize:o,formattedDuration:r,coverArt:n}}export{f as a,c as f};

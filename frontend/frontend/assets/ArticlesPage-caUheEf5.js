import{u as D,a as M,r,j as e,L as F,b as T}from"./index-Cfx8vNNh.js";import{E as B}from"./ErrorMessage-DFJp8pQE.js";const o=12,W=()=>{const L=D(),{categories:A,tags:E,articles:_,isLoading:h,articlesLoading:$,error:N,articlesError:I,fetchArticles:v,fetchArticlesByCategory:f,fetchArticlesByTag:b}=M(),[k,u]=r.useState([]),[d,g]=r.useState(0),[i,x]=r.useState({type:"category",id:"all"}),[l,p]=r.useState(1),y=r.useCallback(async(s=1)=>{try{let a;if(i.type==="category"&&i.id!=="all"&&i.id){const t=await f(i.id),c=(s-1)*o,m=c+o;u(t.slice(c,m)),g(t.length)}else if(i.type==="tag"&&i.id){const t=await b(i.id),c=(s-1)*o,m=c+o;u(t.slice(c,m)),g(t.length)}else a=await v(s,o),a&&(u(a.articles),g(a.total))}catch(a){console.error("Failed to load articles:",a)}},[v,f,b,i]);r.useEffect(()=>{h||y(l)},[y,l,i,h]);const S=r.useCallback(s=>{x(a=>s==="all"?{type:"category",id:"all"}:a.type==="category"&&a.id===s?{type:"category",id:"all"}:{type:"category",id:s}),p(1)},[]),w=r.useCallback(s=>{x(a=>a.type==="tag"&&a.id===s?{type:"category",id:"all"}:{type:"tag",id:s}),p(1)},[]),n=r.useMemo(()=>Math.ceil(d/o),[d]),C=s=>{L(`/article/${s}`)},j=r.useCallback(s=>{p(s),window.scrollTo({top:0,behavior:"smooth"})},[]),P=r.useCallback(()=>{x({type:"category",id:"all"})},[]);return h?e.jsx("div",{className:"articles-page",children:e.jsx(F,{size:"large",message:"Loading articles...",className:"articles-loading"})}):N?e.jsx("div",{className:"articles-page",children:e.jsx(B,{title:"Error Loading Articles",message:N,onRetry:()=>{y(l)}})}):e.jsxs("div",{className:"articles-page",children:[e.jsx("header",{className:"articles-header",children:e.jsxs("div",{className:"articles-header-content",children:[e.jsx("h1",{className:"articles-title md-typescale-display-small",children:"All Articles"}),e.jsx("p",{className:"articles-subtitle md-typescale-body-large",children:"Discover our latest articles and insights"})]})}),e.jsxs("section",{className:"articles-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("h3",{className:"filter-title",children:"Categories"}),e.jsx("div",{className:"category-chips",children:A.map(s=>{const a=i.type==="category"&&i.id===s.id;return e.jsx("md-filter-chip",{label:`${s.name} (${s.count})`,...a?{selected:!0}:{},"data-category-id":s.id,onClick:()=>S(s.id),children:e.jsx("md-icon",{slot:"icon",children:s.icon})},s.id)})})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h3",{className:"filter-title",children:"Tags"}),e.jsx("div",{className:"tag-chips",children:E.map(s=>{const a=i.type==="tag"&&i.id===s.id;return e.jsx("md-filter-chip",{label:`${s.name} (${s.count})`,...a?{selected:!0}:{},"data-tag-id":s.id,onClick:()=>w(s.id),children:e.jsx("md-icon",{slot:"icon",children:"local_offer"})},s.id)})})]}),i.id!=="all"&&e.jsx("div",{className:"filter-actions",children:e.jsxs("md-text-button",{onClick:P,children:[e.jsx("md-icon",{slot:"icon",children:"clear"}),"Clear Filter"]})}),e.jsx("div",{className:"filter-results",children:e.jsxs("p",{className:"results-count md-typescale-body-medium",children:["Showing ",Math.min(l*o,d)," of ",d," articles",i.id!=="all"&&" (filtered)"]})})]}),e.jsxs("section",{className:"articles-content",children:[k.length>0?e.jsx("div",{className:"articles-grid",children:k.map(s=>e.jsxs("div",{className:"secondary-article-card",onClick:()=>C(s.id),style:{cursor:"pointer"},role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),C(s.id))},children:[e.jsx("div",{className:"secondary-article-image",children:e.jsx("div",{className:"secondary-article-visual-content",children:s.imageUrl?e.jsx("img",{src:T.getImageUrl(s.imageUrl),alt:s.title,className:"secondary-article-cover-image",loading:"lazy"}):e.jsx("div",{className:"visual-placeholder",style:{background:"linear-gradient(135deg, #E1BEE7 0%, #F8BBD9 100%)"},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})})}),e.jsxs("div",{className:"secondary-article-content",children:[e.jsxs("div",{className:"secondary-article-meta",children:[e.jsx("span",{className:"secondary-article-tag",children:s.category}),e.jsx("span",{className:"secondary-article-date",children:new Date(s.publishDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsx("h3",{className:"secondary-article-title",children:s.title}),e.jsx("p",{className:"secondary-article-description",children:s.excerpt})]})]},s.id))}):e.jsxs("div",{className:"no-articles",children:[e.jsx("md-icon",{className:"no-articles-icon",children:"article"}),e.jsx("h3",{className:"md-typescale-headline-small",children:"No Articles Found"}),e.jsx("p",{className:"md-typescale-body-medium",children:"No articles are available at the moment."})]}),n>1&&e.jsxs("div",{className:"articles-pagination",children:[e.jsxs("div",{className:"pagination-controls",children:[e.jsx("md-icon-button",{disabled:l===1,onClick:()=>{l>1&&j(l-1)},className:"pagination-button",children:e.jsx("md-icon",{children:"chevron_left"})}),e.jsx("div",{className:"pagination-numbers",children:Array.from({length:n},(s,a)=>{const t=a+1,c=t===l;return t===1||t===n||Math.abs(t-l)<=1?e.jsx("md-text-button",{className:`pagination-number ${c?"current":""}`,onClick:()=>!c&&j(t),style:c?{"--md-text-button-label-text-color":"var(--md-sys-color-on-primary-container)","--md-text-button-container-color":"var(--md-sys-color-primary-container)",backgroundColor:"var(--md-sys-color-primary-container)",color:"var(--md-sys-color-on-primary-container)",boxShadow:"var(--md-sys-elevation-level1)"}:{},children:t},t):t===2&&l>4?e.jsx("span",{className:"pagination-ellipsis",children:"..."},t):t===n-1&&l<n-3?e.jsx("span",{className:"pagination-ellipsis",children:"..."},t):null})}),e.jsx("md-icon-button",{disabled:l===n,onClick:()=>{l<n&&j(l+1)},className:"pagination-button",children:e.jsx("md-icon",{children:"chevron_right"})})]}),e.jsx("div",{className:"pagination-info",children:e.jsxs("span",{className:"md-typescale-body-small",children:["Page ",l," of ",n]})})]})]})]})};export{W as default};

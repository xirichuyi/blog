import{r as n,d as N,u as w,e as S,j as e}from"./index-Cfx8vNNh.js";const E=()=>{const[r,g]=n.useState(""),[l,x]=n.useState(""),[o,p]=n.useState(!1),[f,u]=n.useState(!1),{login:j,isAuthenticated:h,error:t,isLoading:c,clearError:a}=N(),d=w(),m=S();n.useEffect(()=>{if(h&&!c){const s=m.state?.from?.pathname||"/admin/dashboard";d(s,{replace:!0})}},[h,c,d,m]),n.useEffect(()=>()=>a(),[a]);const v=async s=>{if(s.preventDefault(),!(!r.trim()||!l.trim())){u(!0);try{if(await j({username:r.trim(),password:l})){const y=m.state?.from?.pathname||"/admin/dashboard";d(y,{replace:!0})}}catch(i){console.error("Login error:",i)}finally{u(!1)}}},b=()=>{p(!o)};return c?e.jsxs("div",{className:"login-loading",children:[e.jsx("md-circular-progress",{indeterminate:!0}),e.jsx("p",{className:"md-typescale-body-medium",children:"Checking authentication..."})]}):e.jsx("div",{className:"login-container",children:e.jsx("div",{className:"login-background",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("md-icon",{class:"login-icon",children:"admin_panel_settings"}),e.jsx("h1",{className:"md-typescale-headline-medium",children:"Admin Login"}),e.jsx("p",{className:"md-typescale-body-medium",children:"Sign in to access the admin dashboard"})]}),e.jsxs("form",{className:"login-form",onSubmit:v,children:[t&&e.jsxs("div",{className:"login-error",children:[e.jsx("md-icon",{children:"error"}),e.jsx("span",{className:"md-typescale-body-medium",children:t})]}),e.jsx("div",{className:"form-field",children:e.jsx("md-outlined-text-field",{label:"Username",value:r,onInput:s=>{const i=s.target.value||s.detail?.value||"";g(i),t&&a()},required:!0,type:"text",autocomplete:"username",class:"login-input",children:e.jsx("md-icon",{slot:"leading-icon",children:"person"})})}),e.jsx("div",{className:"form-field",children:e.jsxs("md-outlined-text-field",{label:"Password",value:l,onInput:s=>{const i=s.target.value||s.detail?.value||"";x(i),t&&a()},required:!0,type:o?"text":"password",autocomplete:"current-password",class:"login-input",children:[e.jsx("md-icon",{slot:"leading-icon",children:"lock"}),e.jsx("md-icon-button",{slot:"trailing-icon",onClick:b,type:"button",children:e.jsx("md-icon",{children:o?"visibility_off":"visibility"})})]})}),e.jsx("div",{className:"login-actions",children:e.jsx("md-filled-button",{type:"submit",class:"login-button",children:f?e.jsxs(e.Fragment,{children:[e.jsx("md-circular-progress",{indeterminate:!0,slot:"icon",style:{width:"18px",height:"18px"}}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("md-icon",{slot:"icon",children:"login"}),"Sign In"]})})})]}),e.jsx("div",{className:"login-footer",children:e.jsx("p",{className:"md-typescale-body-small",children:"Please enter your admin credentials"})})]})})})};export{E as default};

import{r as c,u as v,b as o,j as s}from"./index-Cfx8vNNh.js";import{A as r}from"./AdminLayout-DBr5zY72.js";const N=()=>{const[t,l]=c.useState(null),[p,d]=c.useState(!0),[n,m]=c.useState(null),i=v();c.useEffect(()=>{h()},[]);const h=async()=>{try{d(!0),m(null);const e=await o.getDashboardStats();if(e.success&&e.data)l(e.data);else{console.warn("Dashboard API failed, calculating stats manually:",e.error);const[a,u]=await Promise.all([o.getPosts({page:1,page_size:1e3}),o.getPublicCategories()]),j={totalPosts:a.success&&(a.total||a.data?.length)||0,totalCategories:u.success&&u.data?.length||0,totalViews:0,recentPosts:a.success?Math.min(a.data?.length||0,10):0};l(j)}}catch(e){console.error("Failed to load dashboard data:",e),m(e instanceof Error?e.message:"Failed to load dashboard data"),l({totalPosts:0,totalCategories:0,totalViews:0,recentPosts:0})}finally{d(!1)}},y=[{title:"Total Posts",value:t?.totalPosts||0,icon:"article",color:"primary"},{title:"Categories",value:t?.totalCategories||0,icon:"category",color:"secondary"},{title:"Total Views",value:t?.totalViews||0,icon:"visibility",color:"tertiary"},{title:"Recent Posts",value:t?.recentPosts||0,icon:"schedule",color:"error"}],x=[{title:"Create New Post",description:"Write and publish a new blog post",icon:"add_circle",action:()=>i("/admin/posts/new"),color:"primary"},{title:"Manage Posts",description:"View and edit existing posts",icon:"edit_note",action:()=>i("/admin/posts"),color:"secondary"},{title:"Upload Music",description:"Add new music to your collection",icon:"library_add",action:()=>i("/admin/music/upload"),color:"tertiary"},{title:"View Analytics",description:"Check your blog performance",icon:"analytics",action:()=>i("/admin/analytics"),color:"error"}];return p?s.jsx(r,{title:"Dashboard",children:s.jsxs("div",{className:"dashboard-loading",children:[s.jsx("md-circular-progress",{indeterminate:!0}),s.jsx("p",{className:"md-typescale-body-medium",children:"Loading dashboard..."})]})}):n?s.jsx(r,{title:"Dashboard",children:s.jsxs("div",{className:"dashboard-error",children:[s.jsx("md-icon",{class:"error-icon",children:"error"}),s.jsx("h2",{className:"md-typescale-headline-small",children:"Error Loading Dashboard"}),s.jsx("p",{className:"md-typescale-body-medium",children:n}),s.jsxs("md-filled-button",{onClick:h,children:[s.jsx("md-icon",{slot:"icon",children:"refresh"}),"Retry"]})]})}):s.jsx(r,{title:"Dashboard",children:s.jsxs("div",{className:"dashboard",children:[s.jsxs("div",{className:"dashboard-welcome",children:[s.jsx("h1",{className:"md-typescale-display-small",children:"Welcome back!"}),s.jsx("p",{className:"md-typescale-body-large",children:"Here's what's happening with your blog today."})]}),s.jsx("div",{className:"stats-grid",children:y.map((e,a)=>s.jsx("md-elevated-card",{class:`stat-card stat-card-${e.color}`,children:s.jsxs("div",{className:"stat-card-content",children:[s.jsxs("div",{className:"stat-header",children:[s.jsx("md-icon",{class:"stat-icon",children:e.icon}),e.trend&&s.jsxs("div",{className:`stat-trend ${e.trend.isPositive?"positive":"negative"}`,children:[s.jsx("md-icon",{children:e.trend.isPositive?"trending_up":"trending_down"}),s.jsxs("span",{children:[e.trend.value,"%"]})]})]}),s.jsxs("div",{className:"stat-body",children:[s.jsx("h3",{className:"stat-value md-typescale-display-medium",children:e.value}),s.jsx("p",{className:"stat-title md-typescale-body-medium",children:e.title})]})]})},a))}),s.jsxs("div",{className:"quick-actions-section",children:[s.jsx("h2",{className:"md-typescale-headline-medium",children:"Quick Actions"}),s.jsx("div",{className:"quick-actions-grid",children:x.map((e,a)=>s.jsx("md-outlined-card",{class:"quick-action-card",onClick:e.action,children:s.jsxs("div",{className:"quick-action-content",children:[s.jsx("md-icon",{class:`action-icon action-icon-${e.color}`,children:e.icon}),s.jsxs("div",{className:"action-text",children:[s.jsx("h3",{className:"md-typescale-title-medium",children:e.title}),s.jsx("p",{className:"md-typescale-body-medium",children:e.description})]}),s.jsx("md-icon",{class:"action-arrow",children:"arrow_forward"})]})},a))})]}),s.jsxs("div",{className:"recent-activity-section",children:[s.jsx("h2",{className:"md-typescale-headline-medium",children:"Recent Activity"}),s.jsx("md-outlined-card",{class:"activity-card",children:s.jsxs("div",{className:"activity-content",children:[s.jsx("md-icon",{class:"activity-icon",children:"history"}),s.jsxs("div",{className:"activity-text",children:[s.jsx("p",{className:"md-typescale-body-large",children:"No recent activity"}),s.jsx("p",{className:"md-typescale-body-medium",children:"Start creating content to see your activity here."})]})]})})]})]})})};export{N as default};

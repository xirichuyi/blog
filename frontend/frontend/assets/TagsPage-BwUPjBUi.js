import{u as S,a as L,r as l,j as e,L as p}from"./index-Cfx8vNNh.js";import{A as k}from"./ArticleCard-8oAlXAIq.js";const _=()=>{const y=S(),{tags:r,isLoading:f,error:o,fetchArticlesByTag:v}=L(),[a,m]=l.useState(null),[h,g]=l.useState([]),[T,x]=l.useState(!1),[z,u]=l.useState(null),[i,j]=l.useState(""),C=async s=>{x(!0),u(null);try{const c=await v(s);g(c)}catch(c){u(c instanceof Error?c.message:"Failed to fetch articles")}finally{x(!1)}},N=async s=>{if(s===a){m(null),g([]);return}m(s),await C(s)},b=s=>{y(`/article/${s}`)},d=r.filter(s=>s.name.toLowerCase().includes(i.toLowerCase())),w=(s,c)=>{const n=s/c;return n>=.8?"tag-size-xl":n>=.6?"tag-size-lg":n>=.4?"tag-size-md":n>=.2?"tag-size-sm":"tag-size-xs"},A=Math.max(...r.map(s=>s.count),1),t=r.find(s=>s.id===a);return f?e.jsx("div",{className:"tags-page",children:e.jsx(p,{size:"large",message:"Loading tags...",className:"tags-loading"})}):o?e.jsx("div",{className:"tags-page",children:e.jsxs("div",{className:"tags-error",children:[e.jsx("md-icon",{className:"error-icon",children:"error"}),e.jsx("h2",{className:"md-typescale-headline-medium",children:"Error Loading Tags"}),e.jsx("p",{className:"md-typescale-body-large",children:o}),e.jsx("md-filled-button",{onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsxs("div",{className:"tags-page",children:[e.jsx("header",{className:"tags-header",children:e.jsxs("div",{className:"tags-header-content",children:[e.jsx("h1",{className:"tags-title md-typescale-display-small",children:"Explore by Tags"}),e.jsx("p",{className:"tags-subtitle md-typescale-body-large",children:"Discover articles through topics and keywords"})]})}),e.jsxs("section",{className:"tags-controls",children:[e.jsx("div",{className:"tags-search",children:e.jsxs("md-outlined-text-field",{label:"Search tags...",value:i,onInput:s=>j(s.target.value),class:"tags-search-field",children:[e.jsx("md-icon",{slot:"leading-icon",children:"search"}),i&&e.jsx("md-icon-button",{slot:"trailing-icon",onClick:()=>j(""),"aria-label":"Clear search",children:e.jsx("md-icon",{children:"close"})})]})}),e.jsxs("div",{className:"tags-stats",children:[e.jsxs("md-assist-chip",{className:"stats-chip",children:[e.jsx("md-icon",{slot:"icon",children:"local_offer"}),d.length," tags"]}),a&&t&&e.jsxs("md-assist-chip",{className:"selected-chip",children:[e.jsx("md-icon",{slot:"icon",children:"check_circle"}),t.name," (",t.count,")"]})]})]}),e.jsxs("section",{className:"tags-section",children:[e.jsx("h2",{className:"section-title md-typescale-headline-medium",children:"Tag Cloud"}),d.length>0?e.jsx("div",{className:"tags-cloud",children:d.map(s=>e.jsxs("md-filter-chip",{className:`tag-chip ${w(s.count,A)} ${a===s.id?"selected":""}`,selected:a===s.id,onClick:()=>N(s.id),children:[s.name,e.jsxs("span",{className:"tag-count",children:["(",s.count,")"]})]},s.id))}):e.jsxs("div",{className:"no-tags",children:[e.jsx("md-icon",{className:"no-tags-icon",children:"local_offer"}),e.jsxs("p",{className:"md-typescale-body-medium",children:['No tags found matching "',i,'"']})]})]}),a&&e.jsxs("section",{className:"articles-section",children:[e.jsxs("div",{className:"articles-header",children:[e.jsxs("h2",{className:"section-title md-typescale-headline-medium",children:['Articles tagged with "',t?.name,'"']}),e.jsxs("md-text-button",{onClick:()=>N(a),className:"clear-selection-btn",children:[e.jsx("md-icon",{slot:"icon",children:"close"}),"Clear Selection"]})]}),T?e.jsx(p,{size:"medium",message:"Loading articles...",className:"articles-loading"}):h.length>0?e.jsx("div",{className:"articles-grid",children:h.map(s=>e.jsx(k,{...s,onClick:b,className:"tag-article-card"},s.id))}):e.jsxs("div",{className:"no-articles",children:[e.jsx("md-icon",{className:"no-articles-icon",children:"article"}),e.jsx("h3",{className:"md-typescale-headline-small",children:"No Articles Found"}),e.jsx("p",{className:"md-typescale-body-medium",children:"There are no articles with this tag yet."})]})]}),!a&&e.jsx("section",{className:"tags-help",children:e.jsxs("div",{className:"help-content",children:[e.jsx("md-icon",{className:"help-icon",children:"info"}),e.jsxs("div",{className:"help-text",children:[e.jsx("h3",{className:"md-typescale-title-medium",children:"How to use tags"}),e.jsx("p",{className:"md-typescale-body-medium",children:"Click on any tag above to see all articles associated with that topic. Tag sizes reflect how frequently they're used across articles."})]})]})})]})};export{_ as default};
